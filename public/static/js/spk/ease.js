Spk.extend('ease',function(){"use strict";var X=function(bb,ba,aj,O){return z(bb,ba,aj,O)},k={},ae=function(az){return 'alpha(opacity='+az+')'},u=Spk.ieVersion,C=Spk.browser,x=Spk.getStyle,z=(function(){var au=46,A='linear',ap=function(ac){return (ac.toString()!=='NaN')?Number(ac)||0:0},p={'linear':function(O,aj,aq,aa){return O*(aj/aq)+aa},'easeInStrong':function(O,aj,aq,aa){return (Math.pow(aj/aq,4)*O)+aa},'easeOutStrong':function(O,aj,aq,aa){return 1-(Math.pow(aj/aq,5)*O)+aa},'easeInOutQuad':function(O,aj,aq,aa){if((aj/=aq/2)<1){return O/2*aj*aj+aa}return -O/2*((--aj)*(aj-2)-1)+aa}},r=(function(){var ab=function(h,b,q){var a=k[h],c=a.props[b];if(void 0!=q&&q){for(var f=0;f<c.timers.length;f++){Spk.win.clearTimeout(c.timers[f])}}c.frames=0,c.currentFrame=0,c.rate=0,c.active=!1};return function(h,b,q){if(void 0!=h&&h instanceof Array){for(var f=0;f<h.length;f++){ab(h[f],b,q)}}else{ab(h,b,q)}}})(),M={},Z=(function(){var z=function(h,b){var a=k[h],c=a.props[b],am=b=='opacity'?'':'px';Spk.win.clearTimeout(c.timers[c.currentFrame]);if(c.currentFrame<c.frames){for(var E=0;E<a.target.length;E++){if(b==='opacity'&&C==='msie'&&u<9){a.target[E].style['filter']='alpha(opacity='+p[a.easeType](c.dist[E],c.currentFrame,c.frames,c.start[E])+')'}else{switch(b){case'backgroundColor':case'color':case'borderColor':var ao=[];for(var f=0;f<c.start[E].length;f++){var ac=Math.round(p[a.easeType](Number(c.dist[E][f]),c.currentFrame,c.frames,Number(c.start[E][f])));ao.push(ac)}a.target[E].style[b]='rgb('+ao.join(',')+')';break;default:a.target[E].style[b]=p[a.easeType](c.dist[E],c.currentFrame,c.frames,c.start[E])+am}}}c.currentFrame++}else{c.active=!1;for(var f=0;f<a.target.length;f++){if(b==='opacity'&&C==='msie'&&u<9){a.target[f].style['filter']='alpha(opacity='+c.end[f]+')'}else{switch(b){case'backgroundColor':case'color':case'borderColor':if(a.colors[b][f].remove&&a.rewindUsed){a.target[f].style[b]=null}else{a.target[f].style[b]='rgb('+c.end[f].join(',')+')'}break;default:a.target[f].style[b]=c.end[f]+am}}}if(c.sync.length>1){for(var f=0;f<c.sync.length;f++){var o=c.sync[f];if(a.props[o].active){r(h,b);return}}}a.active=!1;if(void 0!=a.complete&&a.complete!=null){switch(typeof a.complete){case'function':r(h,b);if(a.isArray){a.complete.call(a.target)}else{a.complete.call(a.target[0])}break;case'string':switch(a.complete){case'rewind':var V=c.sync;r(a.id,b),a.complete=null,a.active=!0,a.rewindUsed=!0,a.startTime=Spk.benchmark();for(var f=0;f<c.sync.length;f++){var o=c.sync[f],g=a.props[o];for(var E=0;E<a.target.length;E++){var w=g.start[E];g.start[E]=g.end[E],g.end[E]=a.colors[o][E].changeValue;if(a.hasColors){for(var O=0;O<g.dist[E].length;O++){g.dist[E][O]=-g.dist[E][O]}}else{g.dist[E]=-g.dist[E]}}s(a.id,o)}return;break}break}}k[h]=null;delete k[h]}},s=function(h,b){var a=k[h],c=a.props[b],Q=function(){z(h,b)};c.active=!0;c.frames=Math.round(k[h].fps*a.time/1000),c.timers=[],c.frames=c.frames>0?c.frames:1;for(var L=0;L<c.frames+1;L++){var af=Spk.benchmark()-a.startTime;c.rate=(L/c.frames)*(a.time);c.timers.push(Spk.win.setTimeout(Q,c.rate-af))}},R=function(h,b){var a=k[h],P=a.startTime,e=Spk.benchmark(),aw=e-P,N=a.delay?a.delay-aw:0;if(N>0){var ai=function(){s(h,b)};a.startTime+=N;M[h]=Spk.win.setTimeout(ai,N)}else{s(h,b)}};return function(h,al){var V=[];for(var ar in al){V.push(ar);k[h].props[ar].sync=V,R(h,ar)}}})(),ah=(function(){var ax={active:!1,start:[],end:[],dist:[],frames:0,currentFrame:0,rate:0,sync:[]};return function(){return Spk.objectClone(ax)}})(),W=(function(){var an=['start','end','dist'];return function(h,b,l){var a=k[h],c=a.props[b],e=a.time;l.push(e);for(var f=0;f<an.length;f++){c[an[f]]=l[f]}}})(),D=function(h,b){if(void 0===k[h].props[b]){var ag=ah();k[h].props[b]=ag,k[h].props[b].prop=b}},l={},F=function(h){for(var ar in l){k[h][ar]=l[ar]}l={}},v=(function(){var h=0;return function(d,e){this.id=h++,this.target=d,this.time=e,this.props={},this.isArray=!1,this.rewindUsed=!1,this.colors={},this.hasColors=!1,this.startTime=Spk.benchmark()}})();v.prototype.easeType='easeInOutQuad';v.prototype.fps=au;return function(d,e,i,U){var d,i,e,B=!1;if(typeof d!='object'){throw 'Invalid ease target object'}if(typeof e!='number'){throw 'Invalid ease time'}if(typeof i!='object'){throw 'Invalid ease properties'}if(d instanceof Array){B=!0}else if(typeof d==='object'&&void 0===d.nodeType){B=!0,d=Spk.objectArray(d)}else{d=[d]}for(var f=0;f<d.length;f++){if(d[f] instanceof Array){var O=d[f];d.splice(f,1);d=d.concat(O)}else if(typeof d[f]==='object'&&void 0===d[f].nodeType){var O=d[f];d.splice(f,1);d=d.concat(Spk.objectArray(O))}}var a=new v(d,e),h=a.id;a.isArray=B;k[h]=a,a.easeType=(void 0!=U&&void 0!=p[U])?U:A;for(var b in i){var G='';switch(b){case'onComplete':b='complete';G='onComplete';l[b]=i[G],i[G]=null;delete i[G];break;case'complete':case'delay':l[b]=i[b],i[b]=null;delete i[b];break}}F(h);for(var b in i){var j=[],H=[],w=[],ad=void 0==i[b].length&&typeof i[b]=='number';if(!ad&&!i[b].length){throw 'Invalid ease property '+b+' : '+i[b]}switch(b){case'background':var at=i[b];i[b]=null;delete i[b];b='backgroundColor';i[b]=at;case'backgroundColor':case'color':case'borderColor':case'borderTopColor':case'borderRightColor':case'borderBottomColor':case'borderLeftColor':if(!a.hasColors){a.hasColors=!0}D(h,b);var Y=i[b].substr(0,1)==='#'?Spk.getRGB(i[b]):i[b].match(/[0-9]{1,3}/g);for(var f=0;f<d.length;f++){w[f]=Y;H[f]=[];j[f]=d[f].style[b].length?d[f].style[b]:x(b,d[f]);if(void 0===a.colors[b]){a.colors[b]={}}j[f]=j[f].substr(0,1)==='#'?Spk.getRGB(j[f]):j[f].match(/[0-9]{1,3}/g);a.colors[b][f]={remove:d[f].style[b].length>0?!1:!0,changeValue:j[f]};for(var aa=0;aa<j[f].length;aa++){H[f][aa]=parseInt(w[f][aa]-j[f][aa])}}break;case'width':case'height':var S='offset';S+=b=='width'?'Width':'Height';for(var f=0;f<d.length;f++){d[f].style[b]=d[f][S]+'px'}case'left':case'right':case'top':case'bottom':case'margin':case'marginTop':case'marginRight':case'marginBottom':case'marginLeft':D(h,b);for(var f=0;f<d.length;f++){j[f]=parseFloat(d[f].style[b])||0;w[f]=ad?j[f]+i[b]:parseFloat(i[b]);if(w[f]<0&&(b==='width'||b==='height')){w[f]=0}H[f]=w[f]-j[f]}break;case'opacity':var ak=parseFloat(i[b]);D(h,b);for(var f=0;f<d.length;f++){if(C=='msie'&&u<9){j[f]=x(b,d[f]).length?parseFloat(d[f].style[b]):100}else{w[f]=ak;j[f]=(d[f].style[b].length)?parseFloat(d[f].style[b])||0:parseFloat(x(b,d[f]))}H[f]=w[f]-j[f]}break;default:throw 'Invalid ease property '+b+' : '+i[b]}W(h,b,[j,w,H])}Z(h,i);return h}})();X.fadeIn=(function(){var e=350,n='linear',y,t=function(m){var as=m.style.visibility||Spk.getStyle('visibility',m),T=(as!=='hidden'),av=m.style.display||Spk.getStyle('display',m),K=(av!=='none'),I={opacity:0};if(!T){I.visibility='visible'}if(!K){I.display='block'}Spk.style(m,I)};return function(m,e,n,y){var f=0;if(m instanceof Array){for(f;f<m.length;f++){t(m[f])}}else{t(m)}e=undefined===e?0:e;if(e instanceof Array&&e.length===2){z(m,e[0],{opacity:1,delay:e[1],complete:y},n)}else{z(m,e,{opacity:1,complete:y},n)}}}()),X.fadeOut=(function(){var e=350,n='linear',y;return function(m,e,n,y){var ay=this,J=function(){Spk.style(m,{display:'none'});if(typeof y==='function'){y.call(m)}};e=undefined===e?0:e;if(e instanceof Array&&e.length===2){z(m,e[0],{opacity:0,delay:e[1],complete:J},n)}else{z(m,e,{opacity:0,complete:J},n)}}}());return X});